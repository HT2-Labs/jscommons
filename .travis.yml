sudo: false
language: node_js
node_js: node

env:
  - MONGODB=3.2.13

before_install:
  - npm install -g greenkeeper-lockfile@1

install:
  - if [ "$PACKAGE_MANAGER" == "npm" ]; then npm install; else yarn; fi

before_script:
  - greenkeeper-lockfile-update
  - npm prune

script:
  - npm run build
  - npm run lint
  - npm run duplication -- --limit=0.01

after_succes:
  - npm run semantic-release
  - greenkeeper-lockfile-upload